{% extends 'shared/layout.html' %}
{% block title %}Dashboard - When2Meet{% endblock %}
{% block extracss %}
<link rel="stylesheet" href="{{ url_for('static', filename='main/css/dashboard.css') }}">
{% endblock %}

{% block maincontent %}
<div class="dashboard-container">
    <h1 class="dashboard-title">Welcome, {{ user }}</h1>
    <div class="action-cards">
        <div class="action-card">
            <h2 class="action-card__title">Create a New Event</h2>
            <p class="action-card__description">
                Start a new scheduling event and invite participants to share their availability.
            </p>
            <a href="/create-event" class="btn btn--primary">Create Event</a>
        </div>
        <div class="action-card">
            <h2 class="action-card__title">Join an Existing Event</h2>
            <p class="action-card__description">
                View and respond to events you've been invited to below.
            </p>
        </div>
    </div>
    
    <div class="events-section">
        <h2 class="events-section__title">Your Events</h2>
        {% if events and events|length > 0 %}
            <div class="events-list">
                {% for event in events %}
                <div class="event-card">
                    <div class="event-card__header">
                        <h3 class="event-card__title">{{ event.event_name }}</h3>
                        {% if event.is_creator %}
                            <span class="event-card__badge event-card__badge--creator">Creator</span>
                        {% else %}
                            <span class="event-card__badge event-card__badge--invited">Invited</span>
                        {% endif %}
                    </div>
                    
                    <div class="event-card__details">
                        <p class="event-card__creator">
                            <strong>Created by:</strong> {{ event.creator_email }}
                        </p>
                        <p class="event-card__dates">
                            <strong>Date Range:</strong> 
                            {{ event.start_date.strftime('%B %d, %Y') if event.start_date.strftime else event.start_date }} 
                            â€“ 
                            {{ event.end_date.strftime('%B %d, %Y') if event.end_date.strftime else event.end_date }}
                        </p>
                    </div>
                    
                    <a href="/event/{{ event.event_id }}" class="btn btn--secondary">Open Event</a>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="events-empty">
                <p>You haven't created or been invited to any events yet.</p>
                <p>Create your first event to get started!</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}